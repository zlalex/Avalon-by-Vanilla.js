!function(e,t){"use strict";Array.prototype.slice;var n=Object.prototype.toString;function a(e){return null!==e&&"object"==typeof e}function i(e){return"Object"===n.call(e).slice(8,14)}function l(e){return"Array"===n.call(e).slice(8,13)}function s(e,t){if(!a(e))return!1;var n;if((l(e)||i(e))&&e.length)for(n=e.length;n--;)t.call(e[n],e[n],n);else if(i(e))for(n in e)t.call(e[n],e[n],n)}var c=$("body"),o=$(".al-select"),r=$(".al-tab"),u=$(".al-menu"),v={zIndex:2e3,init:function(t){e.$=t,this.alSelect(),this.removeActive(),this.alTabs(),this.alMenu()},extend:function(e){var t;if(!i(e))return!1;for(t in e)this[t]=e[t]}};v.extend({isArr:l,isComplex:a,isFunc:function(e){return"function"==typeof e},isFalse:function(e){return!1===e},isObj:i,isStr:function(e){return"string"==typeof e},isTrue:function(e){return!0===e},isUndef:function(e){return void 0===e},doEach:s}),v.extend({removeActive:function(){c.on("click",function(t){t=t||e.event,!$(t.target).parents(".al-select").length&&o.hasClass("active")&&o.removeClass("active")})},toggleActive:function(e,t){s(e,function(e){var n=$(e);n.hasClass("active")&&e!==t[0]&&n.removeClass("active")}),t.toggleClass("active")},alSelect:function(){var e,t,n,a,i=this;if(!o.length)return!1;$(".al-select__input",o).on("click",function(l){var c=$(this);if((e=c.parent()).hasClass("disabled"))return!1;i.toggleActive(o,e),t=$("li",e),n=e.find(".al-select__text"),a=e.find(".al-select__val"),t.on("click",function(){var i,l,c=$(this);if(!c.index())return!1;e.hasClass("multiple")?(l=[],i=[],c.toggleClass("active"),s(t,function(e,t){var n=$(e);n.hasClass("active")&&(l.push(n.html()),i.push(n.attr("al-value")))}),l=l.reverse().join(","),i=i.join(",")):(l=c.html(),i=c.attr("al-value"),c.addClass("active").siblings().removeClass("active")),n.html(l),a.val(i)})})},alTabs:function(){if(!r.length)return!1;r.on("click",".al-tab__pane",function(){$(this).addClass("active").siblings().removeClass("active")})},alMenu:function(){if(!u.length)return!1;u.on("click",".al-menu__title",function(){var e=$(this),t=e.parents(".al-menu"),n=$(".al-menu__title",t);e.next().length?e.parent().toggleClass("active"):(n.removeClass("active"),e.addClass("active"))})},alCreateMask:function(){var e='<div class="al-mask" style="z-index:'+ ++this.zIndex+';"></div>';c.append(e)},alRemoveMask:function(){$(".al-mask").remove()},alCreateMsgBox:function(e){if(this.alCreateMask(),!i(e))throw"arguments type error";var t="success"===e.type?"al-icon__success":"error"===e.type?"al-icon__delete":"al-icon__warning",n=e.label||"您想说点什么吗？",a=(e.callback,'<div class="al-message" style="z-index:'+ ++this.zIndex+';">');a+='<div class="al-context__header"><i class="al-icon al-icon__close"></i></div>',a+='<div class="al-context__content"><p><i class="al-icon '+t+'"></i><span>'+n+"</span></p></div>",a+='<div class="al-context__footer"><button class="al-btn al-btn__default">确定</button></div></div>',c.append(a),this.alCloseMsgBox()},alCloseMsgBox:function(e,t){e=e||$(".al-message"),t=t||function(){};var n=this,a=$(".al-btn",e),i=$(".al-icon__close",e);function l(){e.remove(),n.alRemoveMask(),t()}a.on("click",l),i.on("click",l)},showDialog:function(e){var t=this,n=$(e),a=$(".al-btn__close",n),i=$(".al-icon__close",n);function l(){t.alRemoveMask(),n.addClass("al-hide")}t.alCreateMask(),n.removeClass("al-hide"),e.style.zIndex=++t.zIndex,a.on("click",l),i.on("click",l)}}),v.extend({formData:function(e){if(!i(e))return!1}}),e.avalonUtils=v}(window,document);